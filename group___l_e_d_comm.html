<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>LEDComm: LEDComm Driver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">LEDComm
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___l_e_d_comm.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">LEDComm Driver</div>  </div>
</div><!--header-->
<div class="contents">

<p>Generic (but slow) Serial Driver using an LED instead of TX and RX wires.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga69755dbedee82184887e4965967c89ed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___l_e_d_comm.html#ga69755dbedee82184887e4965967c89ed">ldInit</a> (void)</td></tr>
<tr class="memdesc:ga69755dbedee82184887e4965967c89ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">LEDComm Driver initialization.  <a href="#ga69755dbedee82184887e4965967c89ed">More...</a><br /></td></tr>
<tr class="separator:ga69755dbedee82184887e4965967c89ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac479dd77db9e5881043cfa8001d9849b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___l_e_d_comm.html#gac479dd77db9e5881043cfa8001d9849b">ldObjectInit</a> (<a class="el" href="ledcomm_8h.html#a77add58b9952bc84a23916deaafe8631">LEDCommDriver_t</a> *ldp, qnotify_t inotify, qnotify_t onotify)</td></tr>
<tr class="memdesc:gac479dd77db9e5881043cfa8001d9849b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a generic full duplex driver object.  <a href="#gac479dd77db9e5881043cfa8001d9849b">More...</a><br /></td></tr>
<tr class="separator:gac479dd77db9e5881043cfa8001d9849b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac2090fe93bdf2bf54fb65996c752a1d2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___l_e_d_comm.html#gac2090fe93bdf2bf54fb65996c752a1d2">ldStart</a> (<a class="el" href="ledcomm_8h.html#a77add58b9952bc84a23916deaafe8631">LEDCommDriver_t</a> *ldp, const <a class="el" href="struct_l_e_d_comm_config__t.html">LEDCommConfig_t</a> *config)</td></tr>
<tr class="memdesc:gac2090fe93bdf2bf54fb65996c752a1d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures and starts the driver.  <a href="#gac2090fe93bdf2bf54fb65996c752a1d2">More...</a><br /></td></tr>
<tr class="separator:gac2090fe93bdf2bf54fb65996c752a1d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3b19be7f7757cfee5b4532a08a735e1e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___l_e_d_comm.html#ga3b19be7f7757cfee5b4532a08a735e1e">ldStop</a> (<a class="el" href="ledcomm_8h.html#a77add58b9952bc84a23916deaafe8631">LEDCommDriver_t</a> *ldp)</td></tr>
<tr class="memdesc:ga3b19be7f7757cfee5b4532a08a735e1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops the driver.  <a href="#ga3b19be7f7757cfee5b4532a08a735e1e">More...</a><br /></td></tr>
<tr class="separator:ga3b19be7f7757cfee5b4532a08a735e1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafdcae1066ae46e34c6ca44f8005541df"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___l_e_d_comm.html#gafdcae1066ae46e34c6ca44f8005541df">ldIncomingDataI</a> (<a class="el" href="ledcomm_8h.html#a77add58b9952bc84a23916deaafe8631">LEDCommDriver_t</a> *ldp, uint8_t b)</td></tr>
<tr class="memdesc:gafdcae1066ae46e34c6ca44f8005541df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles incoming data.  <a href="#gafdcae1066ae46e34c6ca44f8005541df">More...</a><br /></td></tr>
<tr class="separator:gafdcae1066ae46e34c6ca44f8005541df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf395afc0822c68e9e0f05cbf0acdbb6b"><td class="memItemLeft" align="right" valign="top">msg_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___l_e_d_comm.html#gaf395afc0822c68e9e0f05cbf0acdbb6b">ldRequestDataI</a> (<a class="el" href="ledcomm_8h.html#a77add58b9952bc84a23916deaafe8631">LEDCommDriver_t</a> *ldp)</td></tr>
<tr class="memdesc:gaf395afc0822c68e9e0f05cbf0acdbb6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles outgoing data.  <a href="#gaf395afc0822c68e9e0f05cbf0acdbb6b">More...</a><br /></td></tr>
<tr class="separator:gaf395afc0822c68e9e0f05cbf0acdbb6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
LEDComm status flags</h2></td></tr>
<tr class="memitem:ga05db608112998996faa3d44fb46189d1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___l_e_d_comm.html#ga05db608112998996faa3d44fb46189d1">LD_PARITY_ERROR</a>&#160;&#160;&#160;32</td></tr>
<tr class="memdesc:ga05db608112998996faa3d44fb46189d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parity error happened.  <a href="#ga05db608112998996faa3d44fb46189d1">More...</a><br /></td></tr>
<tr class="separator:ga05db608112998996faa3d44fb46189d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga537ad7ff6c9dd02201ab8b3e4eea0ef5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___l_e_d_comm.html#ga537ad7ff6c9dd02201ab8b3e4eea0ef5">LD_FRAMING_ERROR</a>&#160;&#160;&#160;64</td></tr>
<tr class="memdesc:ga537ad7ff6c9dd02201ab8b3e4eea0ef5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Framing error happened.  <a href="#ga537ad7ff6c9dd02201ab8b3e4eea0ef5">More...</a><br /></td></tr>
<tr class="separator:ga537ad7ff6c9dd02201ab8b3e4eea0ef5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabba595535b06f7f480044e2f11965719"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___l_e_d_comm.html#gabba595535b06f7f480044e2f11965719">LD_OVERRUN_ERROR</a>&#160;&#160;&#160;128</td></tr>
<tr class="memdesc:gabba595535b06f7f480044e2f11965719"><td class="mdescLeft">&#160;</td><td class="mdescRight">Overflow happened.  <a href="#gabba595535b06f7f480044e2f11965719">More...</a><br /></td></tr>
<tr class="separator:gabba595535b06f7f480044e2f11965719"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0320d9ea1acbb2bdcf658708c6a17013"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___l_e_d_comm.html#ga0320d9ea1acbb2bdcf658708c6a17013">LD_LINK_UP</a>&#160;&#160;&#160;256</td></tr>
<tr class="memdesc:ga0320d9ea1acbb2bdcf658708c6a17013"><td class="mdescLeft">&#160;</td><td class="mdescRight">Link detected.  <a href="#ga0320d9ea1acbb2bdcf658708c6a17013">More...</a><br /></td></tr>
<tr class="separator:ga0320d9ea1acbb2bdcf658708c6a17013"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacbb8040675c5f0c4a3d8df73f77abd38"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___l_e_d_comm.html#gacbb8040675c5f0c4a3d8df73f77abd38">LD_LINK_DOWN</a>&#160;&#160;&#160;512</td></tr>
<tr class="memdesc:gacbb8040675c5f0c4a3d8df73f77abd38"><td class="mdescLeft">&#160;</td><td class="mdescRight">No link detected.  <a href="#gacbb8040675c5f0c4a3d8df73f77abd38">More...</a><br /></td></tr>
<tr class="separator:gacbb8040675c5f0c4a3d8df73f77abd38"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Generic (but slow) Serial Driver using an LED instead of TX and RX wires. </p>
<p>This module implements a generic half duplex serial driver that uses an LED instead of TX and RX wires. The driver implements a <code>SerialDriver</code> interface and uses I/O Queues for communication. Event flags are used to notify the application about incoming data, outgoing data and other I/O events.<br />
 </p><dl class="section pre"><dt>Precondition</dt><dd>In order to use the LEDComm driver the source code must be extracted in the <code>$(CHIBIOS)/ext</code> directory. The project <code>Makefile</code> must be modified by adding <code>$(CHIBIOS)/ext/ledcomm<em>-X.Y.Z</em>/ledcomm.c</code> to the <code>CSRC</code> variable and <code><code>$</code>(CHIBIOS)/ext/ledcomm<em>-X.Y.Z</em></code> to the <code>INCDIR</code> variable.</dd></dl>
<h1><a class="anchor" id="ledcomm_1"></a>
Driver State Machine</h1>
<p>The driver implements a state machine internally, not all the driver functionalities can be used in any moment, any transition not explicitly shown in the following diagram has to be considered an error and shall be captured by an assertion (if enabled). </p><div align="center">
<img src="dot_inline_dotgraph_1.png" alt="dot_inline_dotgraph_1.png" border="0" usemap="#dot_inline_dotgraph_1.map"/>
<map name="dot_inline_dotgraph_1.map" id="dot_inline_dotgraph_1.map"></map>
</div>
 <h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga05db608112998996faa3d44fb46189d1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LD_PARITY_ERROR&#160;&#160;&#160;32</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parity error happened. </p>

<p>Definition at line <a class="el" href="ledcomm_8h_source.html#l00054">54</a> of file <a class="el" href="ledcomm_8h_source.html">ledcomm.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga537ad7ff6c9dd02201ab8b3e4eea0ef5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LD_FRAMING_ERROR&#160;&#160;&#160;64</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Framing error happened. </p>

<p>Definition at line <a class="el" href="ledcomm_8h_source.html#l00055">55</a> of file <a class="el" href="ledcomm_8h_source.html">ledcomm.h</a>.</p>

</div>
</div>
<a class="anchor" id="gabba595535b06f7f480044e2f11965719"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LD_OVERRUN_ERROR&#160;&#160;&#160;128</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Overflow happened. </p>

<p>Definition at line <a class="el" href="ledcomm_8h_source.html#l00056">56</a> of file <a class="el" href="ledcomm_8h_source.html">ledcomm.h</a>.</p>

<p>Referenced by <a class="el" href="group___l_e_d_comm.html#gafdcae1066ae46e34c6ca44f8005541df">ldIncomingDataI()</a>.</p>

</div>
</div>
<a class="anchor" id="ga0320d9ea1acbb2bdcf658708c6a17013"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LD_LINK_UP&#160;&#160;&#160;256</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Link detected. </p>

<p>Definition at line <a class="el" href="ledcomm_8h_source.html#l00057">57</a> of file <a class="el" href="ledcomm_8h_source.html">ledcomm.h</a>.</p>

</div>
</div>
<a class="anchor" id="gacbb8040675c5f0c4a3d8df73f77abd38"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LD_LINK_DOWN&#160;&#160;&#160;512</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>No link detected. </p>

<p>Definition at line <a class="el" href="ledcomm_8h_source.html#l00058">58</a> of file <a class="el" href="ledcomm_8h_source.html">ledcomm.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga69755dbedee82184887e4965967c89ed"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldInit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>LEDComm Driver initialization. </p>
<dl class="section note"><dt>Note</dt><dd>This function is <b>NOT</b> implicitly invoked by <code>halInit()</code>, you must explicitly initialize the driver.</dd></dl>
<dl class="section user"><dt>Function Class:</dt><dd>Initializer, this function just initializes an object and can be invoked before the kernel is initialized. </dd></dl>

<p>Definition at line <a class="el" href="ledcomm_8c_source.html#l00296">296</a> of file <a class="el" href="ledcomm_8c_source.html">ledcomm.c</a>.</p>

<p>References <a class="el" href="group___l_e_d_comm.html#gac479dd77db9e5881043cfa8001d9849b">ldObjectInit()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___l_e_d_comm_ga69755dbedee82184887e4965967c89ed_cgraph.png" border="0" usemap="#group___l_e_d_comm_ga69755dbedee82184887e4965967c89ed_cgraph" alt=""/></div>
<map name="group___l_e_d_comm_ga69755dbedee82184887e4965967c89ed_cgraph" id="group___l_e_d_comm_ga69755dbedee82184887e4965967c89ed_cgraph">
<area shape="rect" id="node2" href="group___l_e_d_comm.html#gac479dd77db9e5881043cfa8001d9849b" title="Initializes a generic full duplex driver object. " alt="" coords="99,5,176,29"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gac479dd77db9e5881043cfa8001d9849b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldObjectInit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ledcomm_8h.html#a77add58b9952bc84a23916deaafe8631">LEDCommDriver_t</a> *&#160;</td>
          <td class="paramname"><em>ldp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">qnotify_t&#160;</td>
          <td class="paramname"><em>inotify</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">qnotify_t&#160;</td>
          <td class="paramname"><em>onotify</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes a generic full duplex driver object. </p>
<p>The HW dependent part of the initialization has to be performed outside, usually in the hardware initialization code.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">ldp</td><td>pointer to a <code><a class="el" href="struct_l_e_d_comm_driver.html" title="Full duplex LEDComm driver class. ">LEDCommDriver</a></code> structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">inotify</td><td>pointer to a callback function that is invoked when some data is read from the Queue. The value can be <code>NULL</code>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">onotify</td><td>pointer to a callback function that is invoked when some data is written in the Queue. The value can be <code>NULL</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>Initializer, this function just initializes an object and can be invoked before the kernel is initialized. </dd></dl>

<p>Definition at line <a class="el" href="ledcomm_8c_source.html#l00322">322</a> of file <a class="el" href="ledcomm_8c_source.html">ledcomm.c</a>.</p>

<p>References <a class="el" href="ledcomm_8h.html#a089555501637a6f1c79b698dcded3ef5ad684ef7a08cc108015bb6a9cea602cd0">LD_STOP</a>, <a class="el" href="group___l_e_d_comm___config.html#ga5448bfdaee5fe1212cd8dac0f910ff27">LEDCOMM_BUFFERS_SIZE</a>, and <a class="el" href="struct_l_e_d_comm_driver.html#ad1ec37fd9f9a44ffe2f84bd912a4093b">LEDCommDriver::vmt</a>.</p>

<p>Referenced by <a class="el" href="group___l_e_d_comm.html#ga69755dbedee82184887e4965967c89ed">ldInit()</a>.</p>

</div>
</div>
<a class="anchor" id="gac2090fe93bdf2bf54fb65996c752a1d2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldStart </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ledcomm_8h.html#a77add58b9952bc84a23916deaafe8631">LEDCommDriver_t</a> *&#160;</td>
          <td class="paramname"><em>ldp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_l_e_d_comm_config__t.html">LEDCommConfig_t</a> *&#160;</td>
          <td class="paramname"><em>config</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configures and starts the driver. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ldp</td><td>pointer to a <code><a class="el" href="struct_l_e_d_comm_driver.html" title="Full duplex LEDComm driver class. ">LEDCommDriver</a></code> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">config</td><td>the architecture-dependent LEDComm driver configuration. If this parameter is set to <code>NULL</code> then a default configuration is used.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>Normal API, this function can be invoked by regular system threads but not from within a lock zone. </dd></dl>

<p>Definition at line <a class="el" href="ledcomm_8c_source.html#l00341">341</a> of file <a class="el" href="ledcomm_8c_source.html">ledcomm.c</a>.</p>

<p>References <a class="el" href="struct_l_e_d_comm_config__t.html#a6c0aec5b151c33c228996efb16af4547">LEDCommConfig_t::anode_pad</a>, <a class="el" href="struct_l_e_d_comm_config__t.html#af25e9c7a4ffe6af00bb260a91afd8371">LEDCommConfig_t::anode_port</a>, <a class="el" href="struct_l_e_d_comm_config__t.html#afc15f784eaa1ca2fa6b09acc3a1a7ae5">LEDCommConfig_t::cathode_extmode</a>, <a class="el" href="struct_l_e_d_comm_config__t.html#affb2f226fadf7a8822fd34b944f364da">LEDCommConfig_t::cathode_pad</a>, <a class="el" href="struct_l_e_d_comm_config__t.html#a5de1fc4b2925cfd9c4b8726883f1f908">LEDCommConfig_t::cathode_port</a>, <a class="el" href="struct_l_e_d_comm_config__t.html#a4d1b5df06e9a7e2b5fbb605bdcfae507">LEDCommConfig_t::data_bits</a>, <a class="el" href="ledcomm_8h.html#a089555501637a6f1c79b698dcded3ef5a0cb1897cd2c383a3c482a6d024f7af27">LD_READY</a>, <a class="el" href="ledcomm_8h.html#a089555501637a6f1c79b698dcded3ef5ad684ef7a08cc108015bb6a9cea602cd0">LD_STOP</a>, <a class="el" href="ledcomm_8h.html#af74fadc4d53a328d57389e0ef23129c4">LEDCOMM_DATA_BITS7</a>, <a class="el" href="ledcomm_8h.html#af4f196c1f447382940f354e4acc04489">LEDCOMM_DEFAULT_SYNCS</a>, and <a class="el" href="struct_l_e_d_comm_config__t.html#a35133d5cfc1771148d2a571b358cfaf1">LEDCommConfig_t::threshold</a>.</p>

</div>
</div>
<a class="anchor" id="ga3b19be7f7757cfee5b4532a08a735e1e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldStop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ledcomm_8h.html#a77add58b9952bc84a23916deaafe8631">LEDCommDriver_t</a> *&#160;</td>
          <td class="paramname"><em>ldp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stops the driver. </p>
<p>Any thread waiting on the driver's queues will be awakened with the message <code>Q_RESET</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ldp</td><td>pointer to a <code><a class="el" href="struct_l_e_d_comm_driver.html" title="Full duplex LEDComm driver class. ">LEDCommDriver</a></code> object</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>Normal API, this function can be invoked by regular system threads but not from within a lock zone. </dd></dl>

<p>Definition at line <a class="el" href="ledcomm_8c_source.html#l00413">413</a> of file <a class="el" href="ledcomm_8c_source.html">ledcomm.c</a>.</p>

<p>References <a class="el" href="ledcomm_8h.html#a089555501637a6f1c79b698dcded3ef5a0cb1897cd2c383a3c482a6d024f7af27">LD_READY</a>, and <a class="el" href="ledcomm_8h.html#a089555501637a6f1c79b698dcded3ef5ad684ef7a08cc108015bb6a9cea602cd0">LD_STOP</a>.</p>

</div>
</div>
<a class="anchor" id="gafdcae1066ae46e34c6ca44f8005541df"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldIncomingDataI </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ledcomm_8h.html#a77add58b9952bc84a23916deaafe8631">LEDCommDriver_t</a> *&#160;</td>
          <td class="paramname"><em>ldp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handles incoming data. </p>
<p>This function must be called from the input interrupt service routine in order to enqueue incoming data and generate the related events. </p><dl class="section note"><dt>Note</dt><dd>The incoming data event is only generated when the input queue becomes non-empty. </dd>
<dd>
In order to gain some performance it is suggested to not use this function directly but copy this code directly into the interrupt service routine.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ldp</td><td>pointer to a <code><a class="el" href="struct_l_e_d_comm_driver.html" title="Full duplex LEDComm driver class. ">LEDCommDriver</a></code> structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">b</td><td>the byte to be written in the driver's Input Queue</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>This is an <b>I-Class</b> API, this function can be invoked from within a system lock zone by both threads and interrupt handlers. </dd></dl>

<p>Definition at line <a class="el" href="ledcomm_8c_source.html#l00445">445</a> of file <a class="el" href="ledcomm_8c_source.html">ledcomm.c</a>.</p>

<p>References <a class="el" href="group___l_e_d_comm.html#gabba595535b06f7f480044e2f11965719">LD_OVERRUN_ERROR</a>.</p>

</div>
</div>
<a class="anchor" id="gaf395afc0822c68e9e0f05cbf0acdbb6b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">msg_t ldRequestDataI </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ledcomm_8h.html#a77add58b9952bc84a23916deaafe8631">LEDCommDriver_t</a> *&#160;</td>
          <td class="paramname"><em>ldp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handles outgoing data. </p>
<p>Must be called from the output interrupt service routine in order to get the next byte to be transmitted. </p><dl class="section note"><dt>Note</dt><dd>In order to gain some performance it is suggested to not use this function directly but copy this code directly into the interrupt service routine.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ldp</td><td>pointer to a <code><a class="el" href="struct_l_e_d_comm_driver.html" title="Full duplex LEDComm driver class. ">LEDCommDriver</a></code> structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The byte value read from the driver's output queue. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Q_EMPTY</td><td>if the queue is empty (the lower driver usually disables the interrupt source when this happens).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>This is an <b>I-Class</b> API, this function can be invoked from within a system lock zone by both threads and interrupt handlers. </dd></dl>

<p>Definition at line <a class="el" href="ledcomm_8c_source.html#l00474">474</a> of file <a class="el" href="ledcomm_8c_source.html">ledcomm.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Oct 20 2014 08:45:07 for LEDComm by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
